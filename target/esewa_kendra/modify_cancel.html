<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <title>Modify/Cancel Registration</title>
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" />
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>

</head>
<script>    function loadHTML(url, elementId) {
        fetch(url)
            .then((response) => response.text())
            .then((data) => {
                document.getElementById(elementId).innerHTML = data;
            });
    }

    loadHTML("header.html", "header-placeholder");
    loadHTML("footer.html", "footer-placeholder");</script>

<body>
    <div id="header-placeholder"></div>
    <div class="container">
        <div class="box">
            <h1 class="display-4 title">Modify/Cancel Registration</h1>
            <hr class="my-4" />
        </div>
        <div class="mt-4">
            <form id="generateTokenForm" method="post" action="CancelBookingServlet">
                <label for="token">Enter Token Number:</label>
                <input type="text" id="token" name="token" required class="form-control">
                <div id="responseMessage" class="mt-3"></div>
                <div class="mt-4">
                    <a href="registration.html" class="btn btn-primary btn-lg button-spacing">Modify</a>
                    <button type="submit" class="btn btn-danger btn-lg button-spacing">Cancel Booking</button>
                </div>
            </form>

        </div>
    </div>
    <div id="footer-placeholder"></div>
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
    <script>
        function loadHTML(url, elementId) {
            fetch(url)
                .then((response) => response.text())
                .then((data) => {
                    document.getElementById(elementId).innerHTML = data;
                });
        }

        $(document).ready(function () {
            loadHTML("header.html", "header-placeholder");
            loadHTML("footer.html", "footer-placeholder");

            $('#generateTokenForm').on('submit', function (event) {
                event.preventDefault(); // Prevent the default form submission

                var $form = $(this);
                var formData = $form.serialize(); // Serialize form data

                $.ajax({
                    type: 'POST',
                    url: $form.attr('action'),
                    data: formData,
                    dataType: 'json',
                    success: function (response) {
                        var messageClass = response.status === 'success' ? 'alert-success' : 'alert-danger';
                        var message = response.message;

                        $('#responseMessage').html(
                            message
                        );
                    },
                    error: function (xhr, status, error) {
                        $('#responseMessage').html(
                            'An unexpected error occurred. Please try again later.'
                        );
                    }
                });
            });
        });
    </script>
</body>

</html>